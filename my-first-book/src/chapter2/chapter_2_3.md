# chapter 2.3 演算

ここではプログラムを書く際によく用いる演算子について説明していきます。

Rustでは基本的な数学演算が用意されています。
```rust
fn main() {
    // 足し算
    let sum = 1 + 1;

    // 引き算
    let difference = 32.5 - 4.3;

    // 掛け算
    let product = 2 * 120;

    // 割り算
    let quotient = 12.7 / 3.2;//小数点以降も表示される
    let floored = 2 / 3; //結果は0 小数点以降は表示されない
    //計算している値の型によってそれぞれの変数の型が決まるので小数点が表示されなかったりする

    // 余り
    let remainder = 46 % 6;
    println!("sumの値{}　differenceの値{}　productの値{}　quotientの値{}　flooredの値{}　remainderの値{}",sum,difference,product,quotient,floored,remainder);
}
```
このような演算のおかげでカウントなどができるようになります。カウントを使う時はループのところで出てきます。またある変数の値を変更したいときに使える方法もあります(mutをつけるのを忘れないようにしましょう)。
```rust
fn main() {
    // 足し算
    let mut sum = 5 + 10;
    sum += 11;//sum = sum + 11;
    println!("sumの値{}",sum);
}
```
この`+=`は元の変数と与えられた値を計算し、元の値に入れ直すというものです。これは引き算などでも行うことができます。

数字の大小比較を行うこともできます。演算子は`==,!=,<,>,<=,>=`になります。これらの結果は論理値で返されます。条件を満たすと`true`そうでなければ`false`の値が返されます。イコールがついているものは以上や以下の判定をします。`==`は値が同じかを判断し`!=`は`==`と逆の動きをします。`!`は否定の記号として使われます。論理値が入った変数に使うと逆の値になります。


>よく見る`println!()`にある `!` は否定ではなくマクロと呼ばれるものになります。表示をする作業を簡単にしてくれるなどコードを書くうえで便利にしているものになります。

```rust
fn main(){
    let equal = 1 == 1;//trueが値となる
    let big = 3 > 2;
    let ebig = 3 >= 3;

    let small = 3 < 2;//falseが値となる
    let esmall = 5 <= 2;
    
    let t = true;
    println!("equalの値{}　bigの値{}　ebigの値{}　smallの値{}　esmallの値{}　tの否定の値{}",equal,big,ebig,small,esmall,!t);
    // !tでtの値を否定したものを表示している
}
```
<br>  

ほかにも演算には論理演算というものがあります。これは条件式を使うときによく使う演算子で`& | ^`の三種類があります。

これらの演算子は二つの論理値の引数をとり結果を論理値で返します。この実際に返す値を下の表に表します。

| A     | B     | A  & B | A &#124; B | A ^ B | 
| ----- | ----- | ------ | ---------- | ----- | 
| true  | true  | true   | true       | false | 
| true  | false | false  | true       | true  | 
| false | true  | false  | true       | true  | 
| false | false | false  | false      | false | 

このような動きをします。ただなかなかこのままの形で使うことはありません。これから出てくるif式などで使う場合に`&& ||`の二つを使い、条件式(>など)と組み合わせて使うことが多いです。`&&`や`||`になっても一つの時と同じようにそれぞれの条件式の結果によって値が変わります。

`&`と`&&`の違いは`&`は二つの引数のを比較するときにその値をビットに直します。そのビットに対して`&`の演算を行います。つまり論理値だけでなく数字同士の`&`をとることもできます。`&&`は引数に論理値しか取ることができません。`|`と`||`も同様です。
```rust
fn main(){
    let a = true;
    let b = false;
    let c = 3 & 5;
    //let d = 3 && 5;　エラーになる
    let e = (1>0) & (1>0);//こちらでも大丈夫
    let f = (1>0) && (1>0);
    println!("cの値{}",c);
}
```
ビットの`&`をとるときの動きはまず3と5を二進数(二進数はある値を0と1で表現するものです)のビットに直します。この時3は`0011`5は`0101`となります。先程の表を使いtrueを1、falseを0としてそれぞれ同じ場所を比較します。実際に計算すると`0001`になると思います。なので上記のコードのcの値が1になります。

### 問題
下のコードを計算できるように書き換えましょう。
```rust,editable
fn main(){
    let x: u8 = 120;
    let y: u32 = 120;

    let z = x + y;
    
    println!("zの値は{}",z);
}
```
下記のブロックに答えがあります。![表示](../img/%E8%A1%A8%E7%A4%BA.png)を押して確認しましょう。
```rust
fn main(){
#    let x: u32 = 120;
#    let y: u32 = 120; //こちらをu8にしても良い

#    let z = x + y;
    
#    println!("zの値は{}",z);
}
```

二つの数字の値の平均を計算し表示するプログラムを作成しましょう。二つの変数の値は自分で決めて実行しましょう。(小数点以下も表示されるように)
```rust,editable
fn main(){

}
```
下記のブロックに答えがあります。![表示](../img/%E8%A1%A8%E7%A4%BA.png)を押して確認しましょう。
```rust,
fn main(){

#    let a = 5.0;
#    let b = 6.0;

#    println!("二つの変数の値の平均は{}",(a+b)/2.0);

}
```

この章までで基礎的な内容が身についたと思います。次の章ではプログラムを書くうえで手助けしてくれるものについて説明していきます。